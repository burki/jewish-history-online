var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},mycore;!function(a){!function(a){!function(a){var b=function(b){function c(a){b.call(this),this._settings=a,this.initialized=!1}return __extends(c,b),c.prototype.handle=function(b){if(1==this.initialized&&b.type==a.events.ImageChangedEvent.TYPE){var c=b;this.trackImage(c.image.href)}else if(b.type==a.events.ComponentInitializedEvent.TYPE){var d=b;ClassDescriber.ofEqualClass(d.component,this)&&(this.trackImage(this._settings.filePath),this.initialized=!0)}},Object.defineProperty(c.prototype,"handlesEvents",{get:function(){var b=new Array;return b.push(a.events.ImageChangedEvent.TYPE),b.push(a.events.ComponentInitializedEvent.TYPE),b},enumerable:!0,configurable:!0}),c.prototype.trackImage=function(a){if("undefined"!=typeof Piwik){var b=this._settings.derivate,c=this._settings.webApplicationBaseURL+"/servlets/MCRIviewClient?derivate="+b+"&page="+a;Piwik.getAsyncTracker().trackLink(c,"download")}else console.log("warn: unable to track image "+a+" cause Piwik js object is undefined")},c.prototype.init=function(){window._paq=[];var b=this._settings["MCR.Piwik.baseurl"];null==b&&console.log("Error: unable to get piwik base url (MCR.Piwik.baseurl)");var c=this._settings["MCR.Piwik.id"];null==c&&console.log("Error: unable to get piwik id (MCR.Piwik.id)"),window._paq.push(["setTrackerUrl",b+"piwik.php"]),window._paq.push(["setSiteId",c]);var d=this;jQuery.getScript(b+"piwik.js",function(){d.trigger(new a.events.ComponentInitializedEvent(d))})},c}(a.ViewerComponent);a.MyCoRePiwikComponent=b}(a.components||(a.components={}))}(a.viewer||(a.viewer={}))}(mycore||(mycore={})),addViewerComponent(mycore.viewer.components.MyCoRePiwikComponent),console.log("PIWIK MODULE");