var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},mycore;!function(a){!function(b){!function(c){var d=a.viewer.widgets.toolbar.ToolbarButton,e=a.viewer.widgets.toolbar.ToolbarGroup,f=function(a){function f(b){a.call(this),this._settings=b,this.idEntryMapping=new MyCoReMap,this.idButtonMapping=new MyCoReMap,this.idGroupMapping=new MyCoReMap,this.toolbarModel=null,this.languageModel=null,this.toolbarButtonSync=Utils.synchronize([function(a){return null!=a.languageModel},function(a){return null!=a.toolbarModel}],function(a){return a.initLanguage()})}return __extends(f,a),f.prototype.init=function(){var a=this;"toolbar"in this._settings&&this._settings.toolbar.forEach(function(b){"group"==b.type?a.idGroupMapping.set(b.id,new e(b.id)):"button"==b.type&&a.idButtonMapping.set(b.id,new d(b.id,b.label,b.tooltip||b.label,b.icon)),a.idEntryMapping.set(b.id,b)}),this.trigger(new c.events.WaitForEvent(this,c.events.ProvideToolbarModelEvent.TYPE)),this.trigger(new c.events.ComponentInitializedEvent(this))},f.prototype.handle=function(a){var d=this;if(a.type==c.events.ProvideToolbarModelEvent.TYPE){var e=a;this.toolbarModel=e.model,this.idGroupMapping.forEach(function(a,b){e.model.addGroup(d.idGroupMapping.get(a))}),this.idButtonMapping.forEach(function(a,b){var c=d.idEntryMapping.get(a).inGroup,f=e.model.getGroups().filter(function(a){return c==a.name})[0];if(void 0===f)return void console.log("Can not find group "+c+"!");f.addComponent(b)}),this.toolbarButtonSync(this)}if(a.type==b.widgets.toolbar.events.ButtonPressedEvent.TYPE){var f=a;this.idEntryMapping.hasThen(f.button.id,function(b){"action"in b&&b.action.apply(d,a),"href"in b&&(window.location.href=b.href)})}a.type==c.events.LanguageModelLoadedEvent.TYPE&&(this.languageModel=a.languageModel,this.toolbarButtonSync(this))},Object.defineProperty(f.prototype,"handlesEvents",{get:function(){return[c.events.ProvideToolbarModelEvent.TYPE,b.widgets.toolbar.events.ButtonPressedEvent.TYPE,c.events.LanguageModelLoadedEvent.TYPE]},enumerable:!0,configurable:!0}),f.prototype.initLanguage=function(){var a=this;this.idButtonMapping.forEach(function(b,c){c.label=a.languageModel.getTranslation(c.label),c.tooltip=a.languageModel.getTranslation(c.tooltip)})},f}(c.ViewerComponent);c.MyCoReToolbarExtenderComponent=f}(b.components||(b.components={}))}(a.viewer||(a.viewer={}))}(mycore||(mycore={})),addViewerComponent(mycore.viewer.components.MyCoReToolbarExtenderComponent),console.log("toolbar-extender MODULE");