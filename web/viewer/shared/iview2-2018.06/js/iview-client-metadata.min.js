var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},mycore;!function(a){!function(a){!function(a){var b=function(b){function c(a){b.call(this),this._settings=a,this._spinner=jQuery("<img />"),this._enabled=!0}return __extends(c,b),c.prototype.init=function(){var b=this;if(this._container=jQuery("<div></div>"),this._container.addClass("panel-body"),void 0!==this._settings.metadataURL&&null!=this._settings.metadataURL){var c=ViewerFormatString(this._settings.metadataURL,{derivateId:this._settings.derivate,objId:this._settings.objId});this._container.load(c,{},function(){b.correctScrollPosition()})}else{if(!("metsURL"in this._settings))return void(this._enabled=!1);var d="/mets:mets/*/mets:techMD/mets:mdWrap[@OTHERMDTYPE='MCRVIEWER_HTML']/mets:xmlData/*",e=this._settings.metsURL,f={url:e,success:function(a){var c=singleSelectShim(a,d,XMLUtil.NS_MAP);null!=c?("xml"in c&&(c=jQuery(c.xml)),b._container.append(c)):b._container.remove()},error:function(a,b,c){console.log(b),console.error(c)}};jQuery.ajax(f)}this.trigger(new a.events.ComponentInitializedEvent(this)),this.trigger(new a.events.WaitForEvent(this,a.events.ShowContentEvent.TYPE))},c.prototype.correctScrollPosition=function(){if(this._container.parent().scrollTop()>0){var a=this._container.height(),b=this._container.parent();b.scrollTop(b.scrollTop()+a)}},c.prototype.handle=function(b){if(this._enabled&&b.type==a.events.ShowContentEvent.TYPE){var c=b;c.component instanceof a.MyCoReChapterComponent&&c.content.prepend(this._container)}},Object.defineProperty(c.prototype,"handlesEvents",{get:function(){return[a.events.ShowContentEvent.TYPE]},enumerable:!0,configurable:!0}),c}(a.ViewerComponent);a.MyCoReMetadataComponent=b}(a.components||(a.components={}))}(a.viewer||(a.viewer={}))}(mycore||(mycore={})),addViewerComponent(mycore.viewer.components.MyCoReMetadataComponent),console.log("METADATA MODULE");